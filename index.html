<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>Predicción de gatos y perros con TensorFlow.js</title>
</head>

<body>
  <h1>Predicción de gatos y perros con TensorFlow.js</h1>
  <input type="file" id="image-selector">
  <button type="button" onclick="predict()">Predecir</button>
  <p id="prediction"></p>
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@3.12.0"></script>
  <script>
    let model;

    async function loadModel() {
      model = await tf.loadLayersModel('model.json');
    }

    async function predict() {
      const file = document.getElementById('image-selector').files[0];
      const img = await tf.browser.fromPixels(file);
      const resizedImg = tf.image.resizeBilinear(img, [64, 64]);
      const expandedImg = resizedImg.expandDims(0);
      const normalizedImg = expandedImg.div(255.0);
      const prediction = await model.predict(normalizedImg).data();
      const output = document.getElementById('prediction');

      if (prediction[0] > prediction[1]) {
        output.innerText = 'Perro';
      } else {
        output.innerText = 'Gato';
      }
    }

    loadModel();

  </script>
</body>

</html>